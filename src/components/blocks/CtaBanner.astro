---
import Cta3 from '@/components/starwind-pro/cta-03/Cta3.astro'
import imageUrlBuilder from '@sanity/image-url'
import { sanityClient } from '../../lib/sanity'

interface Props {
  heading?: string
  primaryButton?: { label: string; url: string; openInNewTab?: boolean }
  secondaryButton?: { label: string; url: string; openInNewTab?: boolean }
  image?: any
}

const { heading, primaryButton, secondaryButton, image } = Astro.props

let imgSrc = ''
if (image?.asset) {
  const builder = imageUrlBuilder(sanityClient)
  imgSrc = builder.image(image).auto('format').fit('crop').width(800).url()
}
---

<Cta3
  title={heading}
  image={imgSrc ? { src: imgSrc, alt: heading || '' } : undefined}
  primaryButton={primaryButton ? { text: primaryButton.label, href: primaryButton.url } : undefined}
  secondaryButton={secondaryButton ? { text: secondaryButton.label, href: secondaryButton.url } : undefined}
/>
